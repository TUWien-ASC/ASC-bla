#ifndef FILE_VECTOR_H
#define FILE_VECTOR_H

#include <iostream>

#include "expression.h"

namespace ASC_bla {

template <typename T>
class Vector : public VectorView<T> {
  typedef VectorView<T> BASE;
  using BASE::data_;
  using BASE::size_;

 public:
  Vector(size_t size) : VectorView<T>(size, new T[size]) { ; }

  Vector(const Vector& v) : Vector(v.Size()) { *this = v; }

  Vector(Vector&& v) : VectorView<T>(0, nullptr) {
    std::swap(size_, v.size_);
    std::swap(data_, v.data_);
  }

  template <typename TB>
  Vector(const Expr<TB>& v) : Vector(v.Size()) {
    *this = v;
  }

  ~Vector() { delete[] data_; }

  using BASE::operator=;
  Vector& operator=(const Vector& v2) {
    for (size_t i = 0; i < size_; i++) data_[i] = v2(i);
    return *this;
  }

  Vector& operator=(Vector&& v2) {
    for (size_t i = 0; i < size_; i++) data_[i] = v2(i);
    return *this;
  }
};

template <typename T>
std::ostream& operator<<(std::ostream& ost, const Vector<T>& v) {
  if (v.Size() > 0) ost << v(0);
  for (size_t i = 1; i < v.Size(); i++) ost << ", " << v(i);
  return ost;
}

}  // namespace ASC_bla

#endif